(self.webpackChunkmilkdown=self.webpackChunkmilkdown||[]).push([[7935],{2150:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});const o='\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n  >\n    <path\n      d="M7.30775 20.4997C6.81058 20.4997 6.385 20.3227 6.031 19.9687C5.677 19.6147 5.5 19.1892 5.5 18.692V5.99973H5.25C5.0375 5.99973 4.85942 5.92782 4.71575 5.78398C4.57192 5.64015 4.5 5.46198 4.5 5.24948C4.5 5.03682 4.57192 4.85873 4.71575 4.71523C4.85942 4.57157 5.0375 4.49973 5.25 4.49973H9C9 4.2549 9.08625 4.04624 9.25875 3.87374C9.43108 3.7014 9.63967 3.61523 9.8845 3.61523H14.1155C14.3603 3.61523 14.5689 3.7014 14.7413 3.87374C14.9138 4.04624 15 4.2549 15 4.49973H18.75C18.9625 4.49973 19.1406 4.57165 19.2843 4.71548C19.4281 4.85932 19.5 5.03748 19.5 5.24998C19.5 5.46265 19.4281 5.64073 19.2843 5.78423C19.1406 5.9279 18.9625 5.99973 18.75 5.99973H18.5V18.692C18.5 19.1892 18.323 19.6147 17.969 19.9687C17.615 20.3227 17.1894 20.4997 16.6923 20.4997H7.30775ZM17 5.99973H7V18.692C7 18.7818 7.02883 18.8556 7.0865 18.9132C7.14417 18.9709 7.21792 18.9997 7.30775 18.9997H16.6923C16.7821 18.9997 16.8558 18.9709 16.9135 18.9132C16.9712 18.8556 17 18.7818 17 18.692V5.99973ZM10.1543 16.9997C10.3668 16.9997 10.5448 16.9279 10.6885 16.7842C10.832 16.6404 10.9037 16.4622 10.9037 16.2497V8.74973C10.9037 8.53723 10.8318 8.35907 10.688 8.21523C10.5443 8.07157 10.3662 7.99973 10.1535 7.99973C9.941 7.99973 9.76292 8.07157 9.61925 8.21523C9.47575 8.35907 9.404 8.53723 9.404 8.74973V16.2497C9.404 16.4622 9.47583 16.6404 9.6195 16.7842C9.76333 16.9279 9.94158 16.9997 10.1543 16.9997ZM13.8465 16.9997C14.059 16.9997 14.2371 16.9279 14.3807 16.7842C14.5243 16.6404 14.596 16.4622 14.596 16.2497V8.74973C14.596 8.53723 14.5242 8.35907 14.3805 8.21523C14.2367 8.07157 14.0584 7.99973 13.8458 7.99973C13.6333 7.99973 13.4552 8.07157 13.3115 8.21523C13.168 8.35907 13.0962 8.53723 13.0962 8.74973V16.2497C13.0962 16.4622 13.1682 16.6404 13.312 16.7842C13.4557 16.9279 13.6338 16.9997 13.8465 16.9997Z"\n    />\n  </svg>\n'},5858:(e,t,n)=>{var o="Expected a function",r=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=d||c||Function("return this")(),f=Object.prototype.toString,h=Math.max,p=Math.min,g=function(){return u.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function C(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==f.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=a.test(e);return n||i.test(e)?s(e.slice(2),n?2:8):l.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,l=!0;if("function"!=typeof e)throw new TypeError(o);return v(n)&&(r="leading"in n?!!n.leading:r,l="trailing"in n?!!n.trailing:l),function(e,t,n){var r,l,a,i,s,d,c=0,u=!1,f=!1,w=!0;if("function"!=typeof e)throw new TypeError(o);function y(t){var n=r,o=l;return r=l=void 0,c=t,i=e.apply(o,n)}function b(e){var n=e-d;return void 0===d||n>=t||n<0||f&&e-c>=a}function m(){var e=g();if(b(e))return x(e);s=setTimeout(m,function(e){var n=t-(e-d);return f?p(n,a-(e-c)):n}(e))}function x(e){return s=void 0,w&&r?y(e):(r=l=void 0,i)}function H(){var e=g(),n=b(e);if(r=arguments,l=this,d=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?y(e):i}(d);if(f)return s=setTimeout(m,t),y(d)}return void 0===s&&(s=setTimeout(m,t)),i}return t=C(t)||0,v(n)&&(u=!!n.leading,a=(f="maxWait"in n)?h(C(n.maxWait)||0,t):a,w="trailing"in n?!!n.trailing:w),H.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=d=l=s=void 0},H.flush=function(){return void 0===s?i:x(g())},H}(e,t,{leading:r,maxWait:t,trailing:l})}},7935:(e,t,n)=>{"use strict";n.d(t,{defineFeature:()=>N});var o=n(797),r=n(4422),l=n(2123),a=n(2845),i=n(6059),s=n(641),d=n(953),c=n(3751),u=n(4164),f=n(9418),h=n(7663),p=n(5287),g=n(5858),v=Object.defineProperty,C=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))w.call(t,n)&&b(e,n,t[n]);if(C)for(var n of C(t))y.call(t,n)&&b(e,n,t[n]);return e};function x(e,t){return Object.assign(e,{meta:m({package:"@milkdown/components"},t)}),e}var H=Object.defineProperty,R=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,M=(e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const I=(0,o.Qx)(((e,t)=>{for(var n in t||(t={}))_.call(t,n)&&M(e,n,t[n]);if(R)for(var n of R(t))k.call(t,n)&&M(e,n,t[n]);return e})({},{renderButton:e=>{switch(e){case"add_row":case"add_col":return"+";case"delete_row":case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":case"row_drag_handle":return"="}}}),"tableBlockConfigCtx");function P({icon:e,class:t,onClick:n}){return(0,s.h)("span",{class:(0,u.A)("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=f.A.sanitize(e.trim()))}})}function q(e,t){for(let n=0;n<e.childCount;n++)if(e.child(n)===t)return n;return-1}function O(e,[t,n]){const o=e.value;if(!o)return;const r=o.querySelectorAll("tr"),l=r[t];if(!l)return;const a=r[0];if(!a)return;const i=a.children[n];if(!i)return;const s=l.children[n];return s?{row:l,col:s,headerCol:i}:void 0}function B({refs:e,index:t,before:n,after:o}){const{contentWrapperRef:r,colHandleRef:l,hoverIndex:a}=e,i=l.value;if(!i)return;a.value=t;const s=O(r,t);if(!s)return;const{headerCol:d}=s;i.dataset.show="true",n&&n(i),(0,h.rD)(d,i,{placement:"top"}).then((({x:e,y:t})=>{Object.assign(i.style,{left:`${e}px`,top:`${t}px`}),o&&o(i)})).catch(console.error)}function A({refs:e,index:t,before:n,after:o}){const{contentWrapperRef:r,rowHandleRef:l,hoverIndex:a}=e,i=l.value;if(!i)return;a.value=t;const s=O(r,t);if(!s)return;const{row:d}=s;i.dataset.show="true",n&&n(i),(0,h.rD)(d,i,{placement:"left"}).then((({x:e,y:t})=>{Object.assign(i.style,{left:`${e}px`,top:`${t}px`}),o&&o(i)})).catch(console.error)}function S(e){const{dragPreviewRef:t,tableWrapperRef:n,contentWrapperRef:o,yLineHandleRef:r,xLineHandleRef:l,colHandleRef:a,rowHandleRef:i}=e,s=t.value;if(!s)return;const d=n.value;if(!d)return;const c=o.value;if(!c)return;const u=c.querySelector("tbody");if(!u)return;const f=s.querySelector("tbody");if(!f)return;const h=r.value;if(!h)return;const p=l.value;if(!p)return;const g=a.value;if(!g)return;const v=i.value;return v?{preview:s,wrapper:d,content:c,contentRoot:u,previewRoot:f,yHandle:h,xHandle:p,colHandle:g,rowHandle:v}:void 0}function D(e,t,n,o){const r=null==n?void 0:n.get(p.kY);if(!(null==r?void 0:r.editable))return;t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.effectAllowed="move");const l=S(e);l&&requestAnimationFrame((()=>{o(l)}))}function j(e,t){const n=function(e,t){return g((n=>{if(!(null==t?void 0:t.editable))return;const{contentWrapperRef:o,yLineHandleRef:r,xLineHandleRef:a,colHandleRef:i,rowHandleRef:s,hoverIndex:d,lineHoverIndex:c}=e,u=r.value;if(!u)return;const f=a.value;if(!f)return;const p=o.value;if(!p)return;const g=s.value;if(!g)return;const v=i.value;if(!v)return;const C=function(e,t){var n,o,r;if(t)try{const a=t.posAtCoords({left:e.clientX,top:e.clientY});if(!a)return;const i=null==a?void 0:a.inside;if(null==i||i<0)return;const s=t.state.doc.resolve(i),d=t.state.doc.nodeAt(i);if(!d)return;const c=["table_cell","table_header"],u=["table_row","table_header_row"],f=c.includes(d.type.name)?d:null==(n=(0,l.gi)((e=>c.includes(e.type.name)))(s))?void 0:n.node,h=null==(o=(0,l.gi)((e=>u.includes(e.type.name)))(s))?void 0:o.node,p=null==(r=(0,l.gi)((e=>"table"===e.type.name))(s))?void 0:r.node;if(!f||!h||!p)return;const g=q(h,f);return[q(p,h),g]}catch(e){return}}(n,t);if(!C)return;const w=O(o,C);if(!w)return;const[y,b]=C,m=w.col.getBoundingClientRect(),x=Math.abs(n.clientX-m.left)<8,H=Math.abs(m.right-n.clientX)<8,R=Math.abs(n.clientY-m.top)<8,_=Math.abs(m.bottom-n.clientY)<8,k=x||H||R||_,M=g.querySelector(".button-group"),I=v.querySelector(".button-group");if(M&&(M.dataset.show="false"),I&&(I.dataset.show="false"),k){const e=p.getBoundingClientRect();g.dataset.show="false",v.dataset.show="false",f.dataset.displayType="tool",u.dataset.displayType="tool";const t=u.getBoundingClientRect().width,n=f.getBoundingClientRect().height;return x||H?(c.value[1]=x?b:b+1,(0,h.rD)(w.col,u,{placement:x?"left":"right",middleware:[(0,h.cY)(x?-1*t:0)]}).then((({x:t})=>{u.dataset.show="true",Object.assign(u.style,{height:`${e.height}px`,left:`${t}px`})})).catch(console.error)):u.dataset.show="false",void(0!==C[0]&&(R||_)?(c.value[0]=R?y:y+1,(0,h.rD)(w.row,f,{placement:R?"top":"bottom",middleware:[(0,h.cY)(R?-1*n:0)]}).then((({y:t})=>{f.dataset.show="true",Object.assign(f.style,{width:`${e.width}px`,top:`${t}px`})})).catch(console.error)):f.dataset.show="false")}c.value=[-1,-1],u.dataset.show="false",f.dataset.show="false",g.dataset.show="true",v.dataset.show="true",A({refs:e,index:C}),B({refs:e,index:C}),d.value=C}),20)}(e,t),o=function(e){return()=>{const{rowHandleRef:t,colHandleRef:n,yLineHandleRef:o,xLineHandleRef:r}=e;setTimeout((()=>{const e=t.value;if(!e)return;const l=n.value;if(!l)return;const a=o.value;if(!a)return;const i=r.value;i&&(e.dataset.show="false",l.dataset.show="false",a.dataset.show="false",i.dataset.show="false")}),200)}}(e);return{pointerMove:n,pointerLeave:o}}x(I,{displayName:"Config<table-block>",group:"TableBlock"}),P.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const $=(0,s.pM)({props:{view:{type:Object,required:!0},ctx:{type:Object,required:!0},getPos:{type:Function,required:!0},config:{type:Object,required:!0},onMount:{type:Function,required:!0},node:{type:Object,required:!0}},setup({view:e,node:t,ctx:n,getPos:o,config:a,onMount:c}){const u=(0,d.KR)(),f=e=>{null!=e&&(e instanceof HTMLElement?(u.value=e,c(e)):u.value=void 0)},v=(0,d.KR)(),C=(0,d.KR)(),w=(0,d.KR)(),y=(0,d.KR)(),b=(0,d.KR)(),m=(0,d.KR)(),x=(0,d.KR)([0,0]),H=(0,d.KR)([-1,-1]),R=(0,d.KR)(),_={dragPreviewRef:m,tableWrapperRef:b,contentWrapperRef:u,yLineHandleRef:y,xLineHandleRef:w,colHandleRef:v,rowHandleRef:C,hoverIndex:x,lineHoverIndex:H,dragInfo:R},{pointerLeave:k,pointerMove:M}=j(_,e),{dragRow:I,dragCol:$}=function(e,t,n){const{dragPreviewRef:o,yLineHandleRef:l,xLineHandleRef:a,dragInfo:i}=e,d=function(e,t){return n=>{D(e,n,t,(({preview:t,content:o,previewRoot:r,yHandle:l,xHandle:a,colHandle:i,rowHandle:s})=>{var d;const{hoverIndex:c,dragInfo:u}=e;a.dataset.displayType="indicator",l.dataset.show="false",i.dataset.show="false",null==(d=s.querySelector(".button-group"))||d.setAttribute("data-show","false");const[f]=c.value;u.value={startCoords:[n.clientX,n.clientY],startIndex:f,endIndex:f,type:"row"},t.dataset.direction="vertical";const h=o.querySelectorAll("tr");for(;r.firstChild;)r.removeChild(r.firstChild);const p=h[f];if(!p)return;r.appendChild(p.cloneNode(!0));const g=p.getBoundingClientRect().height,{width:v}=o.querySelector("tbody").getBoundingClientRect();Object.assign(t.style,{width:`${v}px`,height:`${g}px`}),t.dataset.show="true"}))}}(e,t),c=function(e,t){return n=>{D(e,n,t,(({preview:t,content:o,previewRoot:r,yHandle:l,xHandle:a,colHandle:i,rowHandle:s})=>{var d;const{hoverIndex:c,dragInfo:u}=e;a.dataset.show="false",l.dataset.displayType="indicator",s.dataset.show="false",null==(d=i.querySelector(".button-group"))||d.setAttribute("data-show","false");const[f,h]=c.value;u.value={startCoords:[n.clientX,n.clientY],startIndex:h,endIndex:h,type:"col"},t.dataset.direction="horizontal";const p=o.querySelectorAll("tr");for(;r.firstChild;)r.removeChild(r.firstChild);let g;Array.from(p).forEach((e=>{const t=e.children[h];if(!t)return;void 0===g&&(g=t.getBoundingClientRect().width);const n=t.parentElement.cloneNode(!1),o=t.cloneNode(!0);n.appendChild(o),r.appendChild(n)}));const{height:v}=o.querySelector("tbody").getBoundingClientRect();Object.assign(t.style,{width:`${g}px`,height:`${v}px`}),t.dataset.show="true"}))}}(e,t),u=()=>{const e=o.value;if(!e)return;if("false"===e.dataset.show)return;const t=null==e?void 0:e.querySelector("tbody");for(;null==t?void 0:t.firstChild;)null==t||t.removeChild(t.firstChild);e&&(e.dataset.show="false")},f=()=>{var s;const d=o.value;if(!d)return;const c=l.value;if(!c)return;const u=a.value;if(!u)return;const f=i.value;if(!f)return;if(!t)return;if("false"===d.dataset.show)return;if(!e.colHandleRef.value)return;if(!e.rowHandleRef.value)return;if(c.dataset.show="false",u.dataset.show="false",f.startIndex===f.endIndex)return;const h=t.get(p.MD),g={from:f.startIndex,to:f.endIndex,pos:(null!=(s=null==n?void 0:n())?s:0)+1};if("col"===f.type){h.call(r.cq.key,{pos:g.pos,index:f.startIndex}),h.call(r.tt.key,g);const t=[0,f.endIndex];B({refs:e,index:t})}else{h.call(r.kr.key,{pos:g.pos,index:f.startIndex}),h.call(r.lW.key,g);const t=[f.endIndex,0];A({refs:e,index:t})}requestAnimationFrame((()=>{t.get(p.kY).focus()}))},v=function(e){return g((t=>{const n=S(e);if(!n)return;const{preview:o,content:r,contentRoot:l,xHandle:a,yHandle:i}=n,{dragInfo:s,hoverIndex:d}=e;if("false"===o.dataset.show)return;const c=O(e.contentWrapperRef,d.value);if(!c)return;const u=l.querySelector("tr");if(!u)return;const f=s.value;if(!f)return;if(!l.offsetParent)return;const p=l.offsetParent.offsetTop,g=l.offsetParent.offsetLeft;if("col"===f.type){const e=c.col.getBoundingClientRect().width,{left:n,width:a}=l.getBoundingClientRect(),s=g-n,d=t.clientX+s-e/2,v=t.clientX+s+e/2,[C]=f.startCoords,w=C<t.clientX?"right":"left";o.style.top=`${p}px`;const y=d<n+s-20?n+s-20:d>n+a+s-e+20?n+a+s-e+20:d;o.style.left=`${y}px`;const b=Array.from(u.children),m=b.find(((e,t)=>{const o=e.getBoundingClientRect();let r=o.left+g-n,l=o.right+g-n;if("right"===w){if(r+=o.width/2,l+=o.width/2,r<=v&&l>=v)return!0;if(t===u.children.length-1&&v>l)return!0}else{if(r-=o.width/2,l-=o.width/2,r<=d&&l>=d)return!0;if(0===t&&d<r)return!0}return!1}));if(m){const e=i.getBoundingClientRect().width,t=r.getBoundingClientRect(),n=b.indexOf(m);f.endIndex=n,(0,h.rD)(m,i,{placement:"left"===w?"left":"right",middleware:[(0,h.cY)("left"===w?-1*e:0)]}).then((({x:e})=>{i.dataset.show="true",Object.assign(i.style,{height:`${t.height}px`,left:`${e}px`,top:`${p}px`})})).catch(console.error)}}else if("row"===f.type){const e=c.row.getBoundingClientRect().height,{top:n,height:i}=l.getBoundingClientRect(),s=p-n,d=t.clientY+s-e/2,u=t.clientY+s+e/2,[v,C]=f.startCoords,w=C<t.clientY?"down":"up",y=d<n+s-20?n+s-20:d>n+i+s-e+20?n+i+s-e+20:d;o.style.top=`${y}px`,o.style.left=`${g}px`;const b=Array.from(l.querySelectorAll("tr")),m=b.find(((e,t)=>{const o=e.getBoundingClientRect();let r=o.top+p-n,l=o.bottom+p-n;if("down"===w){if(r+=o.height/2,l+=o.height/2,r<=u&&l>=u)return!0;if(t===b.length-1&&u>l)return!0}else{if(r-=o.height/2,l-=o.height/2,r<=d&&l>=d)return!0;if(0===t&&d<r)return!0}return!1}));if(m){const e=a.getBoundingClientRect().height,t=r.getBoundingClientRect(),n=b.indexOf(m);f.endIndex=n,(0,h.rD)(m,a,{placement:"up"===w?"top":"bottom",middleware:[(0,h.cY)("up"===w?-1*e:0)]}).then((({y:e})=>{a.dataset.show="true",Object.assign(a.style,{width:`${t.width}px`,top:`${e}px`})})).catch(console.error)}}}),20)}(e);return(0,s.sV)((()=>{window.addEventListener("dragover",v),window.addEventListener("dragend",u),window.addEventListener("drop",f)})),(0,s.hi)((()=>{window.removeEventListener("dragover",v),window.removeEventListener("dragend",u),window.removeEventListener("drop",f)})),{dragRow:d,dragCol:c}}(_,n,o),{onAddRow:L,onAddCol:T,selectCol:Z,selectRow:E,deleteSelected:Y,onAlign:V}=function(e,t,n){const{xLineHandleRef:o,contentWrapperRef:l,colHandleRef:a,rowHandleRef:i,hoverIndex:s,lineHoverIndex:d}=e;return{onAddRow:()=>{var e,a,i;if(!t)return;const s=o.value;if(!s)return;const[c]=d.value;if(c<0)return;if(!t.get(p.kY).editable)return;const u=Array.from(null!=(a=null==(e=l.value)?void 0:e.querySelectorAll("tr"))?a:[]),f=t.get(p.MD),h=(null!=(i=null==n?void 0:n())?i:0)+1;u.length===c?(f.call(r.kr.key,{pos:h,index:c-1}),f.call(r.RP.key)):(f.call(r.kr.key,{pos:h,index:c}),f.call(r.kD.key)),f.call(r.kr.key,{pos:h,index:c}),s.dataset.show="false"},onAddCol:()=>{var e,a,i,s;if(!t)return;if(!o.value)return;const[c,u]=d.value;if(u<0)return;if(!t.get(p.kY).editable)return;const f=Array.from(null!=(i=null==(a=null==(e=l.value)?void 0:e.querySelector("tr"))?void 0:a.children)?i:[]),h=t.get(p.MD),g=(null!=(s=null==n?void 0:n())?s:0)+1;f.length===u?(h.call(r.cq.key,{pos:g,index:u-1}),h.call(r.vh.key)):(h.call(r.cq.key,{pos:g,index:u}),h.call(r._r.key)),h.call(r.cq.key,{pos:g,index:u})},selectCol:()=>{var e,o;if(!t)return;const[l,i]=s.value,d=t.get(p.MD),c=(null!=(e=null==n?void 0:n())?e:0)+1;d.call(r.cq.key,{pos:c,index:i});const u=null==(o=a.value)?void 0:o.querySelector(".button-group");u&&(u.dataset.show="true"===u.dataset.show?"false":"true")},selectRow:()=>{var e,o;if(!t)return;const[l,a]=s.value,d=t.get(p.MD),c=(null!=(e=null==n?void 0:n())?e:0)+1;d.call(r.kr.key,{pos:c,index:l});const u=null==(o=i.value)?void 0:o.querySelector(".button-group");u&&l>0&&(u.dataset.show="true"===u.dataset.show?"false":"true")},deleteSelected:e=>{t&&t.get(p.kY).editable&&(e.preventDefault(),e.stopPropagation(),t.get(p.MD).call(r.pK.key),requestAnimationFrame((()=>{t.get(p.kY).focus()})))},onAlign:e=>n=>{t&&t.get(p.kY).editable&&(n.preventDefault(),n.stopPropagation(),t.get(p.MD).call(r.zF.key,e),requestAnimationFrame((()=>{t.get(p.kY).focus()})))}}}(_,n,o);return(0,s.sV)((()=>{requestAnimationFrame((()=>{e.editable&&function(e,t,n){if(!n)return;if(!t)return;const{selection:o}=t.state;if(!(o instanceof i.rn))return;const{$from:a}=o,s=(0,r.UI)(a);if(s&&s.node===n)if(o.isColSelection()){const{$head:t}=o;B({refs:e,index:[0,t.index(t.depth-1)],before:e=>{var t;null==(t=e.querySelector(".button-group"))||t.setAttribute("data-show","true")}})}else if(o.isRowSelection()){const{$head:t}=o,n=(0,l.gi)((e=>"table_row"===e.type.name||"table_header_row"===e.type.name))(t);if(!n)return;const r=q(s.node,n.node);A({refs:e,index:[r,0],before:e=>{var t;r>0&&(null==(t=e.querySelector(".button-group"))||t.setAttribute("data-show","true"))}})}}(_,e,t.value)}))})),()=>(0,s.h)("div",{onDragstart:e=>e.preventDefault(),onDragover:e=>e.preventDefault(),onDragleave:e=>e.preventDefault(),onPointermove:M,onPointerleave:k},(0,s.h)("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"col-drag-handle",class:"handle cell-handle",onDragstart:$,onClick:Z,onPointerdown:e=>e.stopPropagation(),onPointermove:e=>e.stopPropagation(),ref:v},(0,s.h)(P,{icon:a.renderButton("col_drag_handle")}),(0,s.h)("div",{"data-show":"false",class:"button-group",onPointermove:e=>e.stopPropagation()},(0,s.h)("button",{type:"button",onPointerdown:V("left")},(0,s.h)(P,{icon:a.renderButton("align_col_left")})),(0,s.h)("button",{type:"button",onPointerdown:V("center")},(0,s.h)(P,{icon:a.renderButton("align_col_center")})),(0,s.h)("button",{type:"button",onPointerdown:V("right")},(0,s.h)(P,{icon:a.renderButton("align_col_right")})),(0,s.h)("button",{type:"button",onPointerdown:Y},(0,s.h)(P,{icon:a.renderButton("delete_col")})))),(0,s.h)("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"row-drag-handle",class:"handle cell-handle",onDragstart:I,onClick:E,onPointerdown:e=>e.stopPropagation(),onPointermove:e=>e.stopPropagation(),ref:C},(0,s.h)(P,{icon:a.renderButton("row_drag_handle")}),(0,s.h)("div",{"data-show":"false",class:"button-group",onPointermove:e=>e.stopPropagation()},(0,s.h)("button",{type:"button",onPointerdown:Y},(0,s.h)(P,{icon:a.renderButton("delete_row")})))),(0,s.h)("div",{class:"table-wrapper",ref:b},(0,s.h)("div",{"data-show":"false",class:"drag-preview","data-direction":"vertical",ref:m},(0,s.h)("table",null,(0,s.h)("tbody",null))),(0,s.h)("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"x-line-drag-handle",class:"handle line-handle",onPointermove:e=>e.stopPropagation(),ref:w},(0,s.h)("button",{type:"button",onClick:L,class:"add-button"},(0,s.h)(P,{icon:a.renderButton("add_row")}))),(0,s.h)("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"y-line-drag-handle",class:"handle line-handle",onPointermove:e=>e.stopPropagation(),ref:y},(0,s.h)("button",{type:"button",onClick:T,class:"add-button"},(0,s.h)(P,{icon:a.renderButton("add_col")}))),(0,s.h)("table",{ref:f,class:"children"})))}});var L,T,Z=e=>{throw TypeError(e)};class E{constructor(e,t,n,o){var r,l;this.ctx=e,this.node=t,this.view=n,this.getPos=o,r=this,(l=L).has(r)?Z("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(r):l.set(r,undefined);const a=document.createElement("div");a.className="milkdown-table-block";const i=document.createElement("tbody");this.contentDOM=i,i.setAttribute("data-content-dom","true"),i.classList.add("content-dom"),this.nodeRef=(0,d.IJ)(t);const s=(0,c.Ef)($,{view:n,ctx:e,getPos:o,config:e.get(I.key),onMount:e=>{e.appendChild(i)},node:this.nodeRef});s.mount(a),this.app=s,this.dom=a}update(e){return!(e.type!==this.node.type||e.sameMarkup(this.node)&&e.content.eq(this.node.content)||(this.node=e,this.nodeRef.value=e,0))}stopEvent(e){if("drop"===e.type||e.type.startsWith("drag"))return!0;if("mousedown"===e.type||"pointerdown"===e.type){if(e.target instanceof Element&&e.target.closest("button"))return!0;const r=e.target;if(r instanceof HTMLElement&&(r.closest("th")||r.closest("td"))){const r=e;return(t=this,n=L,o=T,((e,t)=>{t.has(e)||Z("Cannot access private method")})(t,n),o).call(this,r)}}var t,n,o;return!1}ignoreMutation(e){return!this.dom||!this.contentDOM||"selection"!==e.type&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))}destroy(){this.app.unmount(),this.dom.remove(),this.contentDOM.remove()}}L=new WeakSet,T=function(e){const t=this.view;if(!t.editable)return!1;const{state:n,dispatch:o}=t,r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return!1;const s=n.doc.resolve(r.inside),d=(0,l.gi)((e=>"table_cell"===e.type.name||"table_header"===e.type.name))(s);if(!d)return!1;if(n.selection instanceof a.U3){const e=(0,l.gi)((e=>"table_cell"===e.type.name||"table_header"===e.type.name))(n.selection.$from);if((null==e?void 0:e.node)===d.node)return!1}const{from:c}=d,u=a.nh.create(n.doc,c+1);return!n.selection.eq(u)&&(n.selection instanceof i.rn?setTimeout((()=>{o(n.tr.setSelection(u).scrollIntoView())}),20):requestAnimationFrame((()=>{o(n.tr.setSelection(u).scrollIntoView())})),!0)};const Y=(0,o.m5)(r._A.node,(e=>(t,n,o)=>new E(e,t,n,o)));x(Y,{displayName:"NodeView<table-block>",group:"TableBlock"});const V=[I,Y];var W=n(8726),F=n(2150);const K='\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="16"\n    height="16"\n    viewBox="0 0 16 16"\n  >\n    <path\n      d="M3.5 9.83366C3.35833 9.83366 3.23961 9.78571 3.14383 9.68983C3.04794 9.59394 3 9.47516 3 9.33349C3 9.19171 3.04794 9.07299 3.14383 8.97733C3.23961 8.88155 3.35833 8.83366 3.5 8.83366H12.5C12.6417 8.83366 12.7604 8.8816 12.8562 8.97749C12.9521 9.07338 13 9.19216 13 9.33383C13 9.4756 12.9521 9.59433 12.8562 9.68999C12.7604 9.78577 12.6417 9.83366 12.5 9.83366H3.5ZM3.5 7.16699C3.35833 7.16699 3.23961 7.11905 3.14383 7.02316C3.04794 6.92727 3 6.80849 3 6.66683C3 6.52505 3.04794 6.40633 3.14383 6.31066C3.23961 6.21488 3.35833 6.16699 3.5 6.16699H12.5C12.6417 6.16699 12.7604 6.21494 12.8562 6.31083C12.9521 6.40671 13 6.52549 13 6.66716C13 6.80894 12.9521 6.92766 12.8562 7.02333C12.7604 7.1191 12.6417 7.16699 12.5 7.16699H3.5Z"\n    />\n  </svg>\n',N=(e,t)=>{e.config((e=>{e.update(I.key,(e=>({...e,renderButton:e=>{var n,o,r,l,a,i,s,d,c,u,f,h,p,g,v,C,w,y;switch(e){case"add_row":return null!=(o=null==(n=null==t?void 0:t.addRowIcon)?void 0:n.call(t))?o:W.p;case"add_col":return null!=(l=null==(r=null==t?void 0:t.addColIcon)?void 0:r.call(t))?l:W.p;case"delete_row":return null!=(i=null==(a=null==t?void 0:t.deleteRowIcon)?void 0:a.call(t))?i:F.r;case"delete_col":return null!=(d=null==(s=null==t?void 0:t.deleteColIcon)?void 0:s.call(t))?d:F.r;case"align_col_left":return null!=(u=null==(c=null==t?void 0:t.alignLeftIcon)?void 0:c.call(t))?u:'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n  >\n    <path\n      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM4.25 16.625C4.0375 16.625 3.85942 16.5531 3.71575 16.4093C3.57192 16.2654 3.5 16.0872 3.5 15.8748C3.5 15.6621 3.57192 15.484 3.71575 15.3405C3.85942 15.1968 4.0375 15.125 4.25 15.125H13.75C13.9625 15.125 14.1406 15.1969 14.2843 15.3408C14.4281 15.4846 14.5 15.6628 14.5 15.8753C14.5 16.0879 14.4281 16.266 14.2843 16.4095C14.1406 16.5532 13.9625 16.625 13.75 16.625H4.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM4.25 8.875C4.0375 8.875 3.85942 8.80308 3.71575 8.65925C3.57192 8.51542 3.5 8.33725 3.5 8.12475C3.5 7.91208 3.57192 7.734 3.71575 7.5905C3.85942 7.44683 4.0375 7.375 4.25 7.375H13.75C13.9625 7.375 14.1406 7.44692 14.2843 7.59075C14.4281 7.73458 14.5 7.91275 14.5 8.12525C14.5 8.33792 14.4281 8.516 14.2843 8.6595C14.1406 8.80317 13.9625 8.875 13.75 8.875H4.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"\n    />\n  </svg>\n';case"align_col_center":return null!=(h=null==(f=null==t?void 0:t.alignCenterIcon)?void 0:f.call(t))?h:'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n  >\n    <path\n      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM8.25 16.625C8.0375 16.625 7.85942 16.5531 7.71575 16.4093C7.57192 16.2654 7.5 16.0872 7.5 15.8748C7.5 15.6621 7.57192 15.484 7.71575 15.3405C7.85942 15.1968 8.0375 15.125 8.25 15.125H15.75C15.9625 15.125 16.1406 15.1969 16.2843 15.3408C16.4281 15.4846 16.5 15.6628 16.5 15.8753C16.5 16.0879 16.4281 16.266 16.2843 16.4095C16.1406 16.5532 15.9625 16.625 15.75 16.625H8.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM8.25 8.875C8.0375 8.875 7.85942 8.80308 7.71575 8.65925C7.57192 8.51542 7.5 8.33725 7.5 8.12475C7.5 7.91208 7.57192 7.734 7.71575 7.5905C7.85942 7.44683 8.0375 7.375 8.25 7.375H15.75C15.9625 7.375 16.1406 7.44692 16.2843 7.59075C16.4281 7.73458 16.5 7.91275 16.5 8.12525C16.5 8.33792 16.4281 8.516 16.2843 8.6595C16.1406 8.80317 15.9625 8.875 15.75 8.875H8.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"\n    />\n  </svg>\n';case"align_col_right":return null!=(g=null==(p=null==t?void 0:t.alignRightIcon)?void 0:p.call(t))?g:'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n  >\n    <path\n      d="M4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25ZM10.25 8.875C10.0375 8.875 9.85942 8.80308 9.71575 8.65925C9.57192 8.51542 9.5 8.33725 9.5 8.12475C9.5 7.91208 9.57192 7.734 9.71575 7.5905C9.85942 7.44683 10.0375 7.375 10.25 7.375H19.75C19.9625 7.375 20.1406 7.44692 20.2843 7.59075C20.4281 7.73458 20.5 7.91275 20.5 8.12525C20.5 8.33792 20.4281 8.516 20.2843 8.6595C20.1406 8.80317 19.9625 8.875 19.75 8.875H10.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM10.25 16.625C10.0375 16.625 9.85942 16.5531 9.71575 16.4093C9.57192 16.2654 9.5 16.0872 9.5 15.8748C9.5 15.6621 9.57192 15.484 9.71575 15.3405C9.85942 15.1968 10.0375 15.125 10.25 15.125H19.75C19.9625 15.125 20.1406 15.1969 20.2843 15.3408C20.4281 15.4846 20.5 15.6628 20.5 15.8753C20.5 16.0879 20.4281 16.266 20.2843 16.4095C20.1406 16.5532 19.9625 16.625 19.75 16.625H10.25ZM4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25Z"\n    />\n  </svg>\n';case"col_drag_handle":return null!=(C=null==(v=null==t?void 0:t.colDragHandleIcon)?void 0:v.call(t))?C:K;case"row_drag_handle":return null!=(y=null==(w=null==t?void 0:t.rowDragHandleIcon)?void 0:w.call(t))?y:K}}})))})).use(V)}},8726:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});const o='\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n  >\n    <g clip-path="url(#clip0_971_7676)">\n      <path\n        d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"\n      />\n    </g>\n    <defs>\n      <clipPath id="clip0_971_7676">\n        <rect width="24" height="24" />\n      </clipPath>\n    </defs>\n  </svg>\n'}}]);