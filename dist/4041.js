"use strict";(self.webpackChunkmilkdown=self.webpackChunkmilkdown||[]).push([[4041],{4041:(e,t,n)=>{n.d(t,{defineFeature:()=>O});var l=n(797),c=n(9681),i=n(2845),o=n(641),r=n(953),a=n(3751),s=n(4164),d=n(9418),u=Object.defineProperty,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&b(e,n,t[n]);if(p)for(var n of p(t))v.call(t,n)&&b(e,n,t[n]);return e};function m(e,t){return Object.assign(e,{meta:g({package:"@milkdown/components"},t)}),e}const y=(0,l.Qx)({renderLabel:({label:e,listType:t,checked:n})=>null==n?"bullet"===t?"⦿":e:n?"☑":"□"},"listItemBlockConfigCtx");function k({icon:e,class:t,onClick:n}){return(0,o.h)("span",{class:(0,s.A)("milkdown-icon",t),onPointerdown:n,ref:t=>{t&&e&&(t.innerHTML=d.A.sanitize(e.trim()))}})}m(y,{displayName:"Config<list-item-block>",group:"ListItemBlock"}),k.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const w=(0,o.pM)({props:{label:{type:Object,required:!0},checked:{type:Object,required:!0},listType:{type:Object,required:!0},config:{type:Object,required:!0},readonly:{type:Object,required:!0},selected:{type:Object,required:!0},setAttr:{type:Function,required:!0},onMount:{type:Function,required:!0}},setup({label:e,checked:t,listType:n,config:l,readonly:c,setAttr:i,onMount:r,selected:a}){const d=e=>{null!=e&&e instanceof Element&&r(e)},u=e=>{e.stopPropagation(),e.preventDefault(),null!=t.value&&i("checked",!t.value)},p=(0,o.EW)((()=>l.renderLabel({label:e.value,listType:n.value,checked:t.value,readonly:c.value}))),h=(0,o.EW)((()=>null==t.value?"bullet"===n.value?"bullet":"ordered":t.value?"checked":"unchecked"));return()=>(0,o.h)("li",{class:(0,s.A)("list-item",a.value&&"ProseMirror-selectednode")},(0,o.h)("div",{class:"label-wrapper",onPointerdown:u,contenteditable:!1},(0,o.h)(k,{class:(0,s.A)("label",c.value&&"readonly",h.value),icon:p.value})),(0,o.h)("div",{class:"children",ref:d}))}}),f=(0,l.m5)(c.hm.node,(e=>(t,n,l)=>{const c=document.createElement("div");c.className="milkdown-list-item-block";const s=document.createElement("div");s.setAttribute("data-content-dom","true"),s.classList.add("content-dom");const d=(0,r.KR)(t.attrs.label),u=(0,r.KR)(t.attrs.checked),p=(0,r.KR)(t.attrs.listType),h=(0,r.KR)(!n.editable),v=e.get(y.key),b=(0,r.KR)(!1),g=(0,o.nT)((()=>{b.value?c.classList.add("selected"):c.classList.remove("selected")})),m=(0,a.Ef)(w,{label:d,checked:u,listType:p,readonly:h,config:v,selected:b,setAttr:(e,t)=>{const c=l();null!=c&&n.dispatch(n.state.tr.setNodeAttribute(c,e,t))},onMount:e=>{const{anchor:t,head:l}=n.state.selection;e.appendChild(s),requestAnimationFrame((()=>{const e=n.state.doc.resolve(t),c=n.state.doc.resolve(l);n.dispatch(n.state.tr.setSelection(new i.U3(e,c)))}))}});m.mount(c);const k=e=>{p.value=e.attrs.listType,d.value=e.attrs.label,u.value=e.attrs.checked,h.value=!n.editable};k(t);let f=t;return{dom:c,contentDOM:s,update:e=>e.type===t.type&&(e.sameMarkup(f)&&e.content.eq(f.content)||(f=e,k(e)),!0),ignoreMutation:e=>!c||!s||"selection"!==e.type&&(s===e.target&&"attributes"===e.type||!s.contains(e.target)),selectNode:()=>{b.value=!0},deselectNode:()=>{b.value=!1},destroy:()=>{g(),m.unmount(),c.remove(),s.remove()}}}));m(f,{displayName:"NodeView<list-item-block>",group:"ListItemBlock"});const C=[y,f],O=(e,t)=>{e.config((e=>function(e,t){e.set(y.key,{renderLabel:({label:e,listType:n,checked:l})=>{var c,i,o,r,a,s;return null==l?"bullet"===n?null!=(i=null==(c=null==t?void 0:t.bulletIcon)?void 0:c.call(t))?i:'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n  >\n    <g clip-path="url(#clip0_952_6527)">\n      <circle cx="12" cy="12" r="3" />\n    </g>\n    <defs>\n      <clipPath id="clip0_952_6527">\n        <rect width="24" height="24" />\n      </clipPath>\n    </defs>\n  </svg>\n':e:l?null!=(r=null==(o=null==t?void 0:t.checkBoxCheckedIcon)?void 0:o.call(t))?r:'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n  >\n    <g clip-path="url(#clip0_1803_1151)">\n      <path\n        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10.71 16.29C10.32 16.68 9.69 16.68 9.3 16.29L5.71 12.7C5.32 12.31 5.32 11.68 5.71 11.29C6.1 10.9 6.73 10.9 7.12 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.71 16.29Z"\n      />\n    </g>\n    <defs>\n      <clipPath id="clip0_1803_1151">\n        <rect width="24" height="24" />\n      </clipPath>\n    </defs>\n  </svg>\n':null!=(s=null==(a=null==t?void 0:t.checkBoxUncheckedIcon)?void 0:a.call(t))?s:'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n  >\n    <g clip-path="url(#clip0_1803_535)">\n      <path\n        d="M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z"\n      />\n    </g>\n    <defs>\n      <clipPath id="clip0_1803_535">\n        <rect width="24" height="24" />\n      </clipPath>\n    </defs>\n  </svg>\n'}})}(e,t))).use(C)}}}]);